## ✅ 시스템 개요 요약

### 🎯 목표
전장 내 병사 및 드론을 **센서 노드화**하여  
→ 적 식별 / 위치 파악 / 전장 상황 분석  
→ **실시간 정보 공유 + 자율 판단** 지원

---


아키텍처


![Image](https://github.com/user-attachments/assets/d5c62f23-52d0-4703-811f-680e71bb440c)

---


### 🧍‍♂️ 전투 노드 구성 (병사 또는 드론)

**센서 탑재:**
- 📷 카메라 (적 병력/장비 인식)
- 📡 GPS (위치 확인)
- 🪪 ID (장비/병사 식별 정보 포함)
- 사전학습된 모델로 장비 병사 식별 : `YOLOv5`, `YOLOv8`

**데이터 수집 방식:**
- 1초마다 주기적 전송, 이벤트 (적 탐지 image 보냄) 기반 전송

**전송 데이터 구조 (MQTT + TLS):**
- 다수의 노드에도 빠른 동작을 위해, Tank, BMP등 식별시, 해당 부분 crop한 image 전송
- 식별되지 않았을 경우에는 image 필수 전송 X
- 현실적으로 base64로 image 변환하여 보내기에 상황이 빠듯할 수 있음.
- 그러므로, image를 보낼 http 서버 추가
```
json
{
  "timestamp": "2025-06-13T14:58:12Z",
  "node_id": "pi_07",
  "gps": [37.2523, 127.1167],
  "detected": [
    {"class": "soldier", "confidence": 0.88},
    {"class": "tank", "confidence": 0.72}
  ],
  "image_base64": "/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDA..."
}
```

---

### 🧠 서버 / 지휘 체계 기능

#### 🔍 CNN 기반 탐지된 적 분류
- 사전 학습된 모델 사용: `ResNet`, `EfficientNet`  
- 탱크 / APC / BMP / SPA 등 classification 수행

#### 🗺️ 시공간 분석
- 적군 **밀집 지역** 감지
- 병사 노드 위치 기반 **군집화** → 분대/소대 자동 분류
- 적군의 이동 경로 예측
- **위험 구역** 식별 및 자동 경고 전송

#### 🌲 지휘 계통 트리 구조
- 분대 → 소대 -> 중대 -> 대대 -> 여단 혹은 사단 계층 구조화
- 트리형 노드 관계 DB 관리: `Neo4j` 또는 `RedisGraph` 활용

#### 📤 실시간 정보 피드백
- 분석된 요약 전장 정보 → MQTT 통해 노드에 **push 전송**
- 각 노드는 수신 데이터를 바탕으로 **자율 판단 및 행동** 수행  
  (예: 위치 변경, 협동 사격, 회피 등)

---

### ✈️ 드론 협동 로직

드론은 **공중 노드(Aerial Node)**로 아래 구조에 따라 동작:

1. 병사 노드가 적군 탐지  
2. 서버가 GPS 기반으로 **타겟 위치 계산**  
3. 가장 가까운 드론에게 **임무 메시지 전송**  
   - 임무 유형: `정찰`, `타격`, `추적`, `대기`
4. 드론이 자율 비행 + 정찰/공격/후퇴 수행

> ⚙️ 추가 기능: 드론 간 **P2P 메시징** 지원 → 직접 협동 전략 공유 가능

---

🧰 기술 스택 개요


| 구성 요소    | 기술 방향                     | 예시 기술                        |
| -------- | ------------------------- | ---------------------------- |
| 노드 디바이스  | 저전력 GPU + 센서              | Raspberry Pi 4B |
| 데이터 전송   | MQTT + TLS 보안     | Mosquitto, paho-mqtt         |
| 지휘 트리 구조 | 위치-관계 기반 트리형 그래프 DB       | Neo4j, RedisGraph            |
| 적 탐지 모델  | 사전학습된 CNN/YOLO            | YOLOv5-nano, EfficientNet    |
| 전장 분석    | 위치 기반 군집화 + 메시지 패싱(GNN 등) | scikit-learn, PyG, DGL       |
| 드론 협동    | FSM or 강화학습 기반 협공 로직      | MAVSDK, ROS, AirSim          |
| 상황 공유    | 구역 단위 요약 정보 push          | REST API + Leaflet.js        |




🧪 연구 가능 단계 정리


| 단계  | 목표 설명                    | 가능성                          |
| --- | ------------------------ | ---------------------------- |
| 1단계 | 단일 노드 CNN 이미지 인식 프로토타입   | ✅ 매우 쉬움                      |
| 2단계 | 여러 노드 → 서버로 전송 → 지도에 시각화 | ✅ 가능                         |
| 3단계 | 적 밀집도 분석 + Heatmap 표시    | ✅ 가능                         |
| 4단계 | 드론과의 협동 (정찰, 타겟팅) 구현     | ⚠️ 가능하나 고비용 (AirSim 추천)      |
| 5단계 | 노드 수 확장 (100+), 쿠버네티스 도입 | 🔁 실전은 어려움, 연구용 미니클러스터 수준 가능 |


---


### 개발 과정

1. 드론을 직접 만들어 사용하기 어려워서, 특정 동작에 대하여 명령어 형태로 대체함 (FSM 처럼) 
2. 실제 전장에서 테스트하기 불가능하니, unreal engine등을 사용하여 테스트함 (추후 변경 가능)


